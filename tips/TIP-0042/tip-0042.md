---
tip: 42
title: IOTA 2.0 UTXO Accounts
description: Defines the IOTA 2.0 Account used to issue blocks onto the network
author:
  Philipp Gackstatter (@PhilippGackstatter) <philipp.gackstatter@iota.org>, Andrew Cullen (@cyberphysic4l)
  <andrew.cullen@iota.org>, Levente Pap (@lzpap) <levente.pap@iota.org>
discussions-to: TODO
status: Draft
type: Standards
layer: Core
created: 2023-05-03
requires: TIP-21, TIP-22, TIP-38, TIP-45 and TIP-47
replaces: TIP-18
---

# Table of Contents

1. [Summary](#summary)
2. [Motivation](#motivation)
3. [Building Blocks](#building-blocks)
4. [Unlock Conditions](#unlock-conditions)
   - [State Controller Address Unlock Condition](#state-controller-address-unlock-condition)
   - [Governor Address Unlock Condition](#governor-address-unlock-condition)
   - [Account Locking & Unlocking](#account-locking--unlocking)
5. [Features](#features)
   - [Block Issuer Feature](#block-issuer-feature)
   - [Staking Feature](#staking-feature)
6. [Account Output](#account-output)
7. [Implicit Account](#implicit-account)
8. [Migration](#migration)
9. [Rationale & Alternatives](#rationale--alternatives)
10. [Copyright](#copyright)

# Summary

The account is the central component of the IOTA 2.0 ledger that enables:

- Issuance of blocks by burning Mana.
- Staking IOTA tokens for the validation of the network.
- Secure ownership of all digital assets on the ledger.

It was originally defined as the Alias Output in [TIP-18](../TIP-0018/tip-0018.md). The Account Output represents a
strict extension of the functionality of the Alias Output.

## Summary of changes compared to TIP-18

- Rename "Alias" to "Account".
- Add `Mana` field to the `Account`.
- Remove `Native Tokens` field. See [TIP-38 (Native Token Migration)](../TIP-0038/tip-0038.md#native-token-migration)
  for migration details.
- Add _Block Issuer Feature_.
  - Mana owned by an account with a _Block Issuer Feature_ is bound to that account and can only be moved out with a
    delay.
  - Accounts with a Block Issuance Credit of less than zero cannot be unlocked until the balance is non-negative.
  - The block issuer keys in such a feature have a higher storage deposit.
- Add _Staking Feature_.
  - Locks a certain amount of tokens to an account which makes the staker eligible to be selected into the validator
    committee.
  - The feature has a higher storage deposit than regular features.

# Motivation

The goal of IOTA 2.0 is digital autonomy for everyone. Its incentivization model broadly consists of Mana and Staking.
Mana is needed to write to the ledger, while staking is required for the protocol's security. Both of these mechanisms
should follow the principle of Digital Autonomy, and the account is a manifestation of that principle on the IOTA
ledger.

Accounts are the central component of the IOTA 2.0 ledger and are central to the goal of digital autonomy. In DLTs, one
can distinguish between natural and synthetic actors. Natural actors are those that directly benefit from utilizing the
ledger and thus have a natural incentive to participate, while synthetic actors do not and instead need to be
artificially incentivized to participate. Accounts enable natural actors to accumulate Mana from their IOTA tokens and
burn it to issue blocks, making the network feeless for token holders. Account owners can therefore be their own block
issuers rather than having to depend on a synthetic actor to publish their block, thus contributing to digital autonomy.

Next to block issuance, accounts are used for staking and delegation. Users can stake tokens from their account to
become a validator in the protocol. Other users increase a validator's consensus weight by delegating to a staking
account of their choice. Staking and delegation have low barriers to entry, as anyone can participate in the validation
and no minimum stake is required. Stakers need to lock their tokens in order to become validators, increasing the
commitment to the security of the network.

The account's keys in unlock conditions can be rotated, while its Account ID stays the same. With its ability to own
other outputs, this means an improvement for both the security as well as the user experience, as a single account can
be used to control all of a user's assets on the ledger.

In summary, the account is the central component that enables the issuance of blocks, staking for validation and secure
ownership of digital assets.

# Building Blocks

## Data Types & Subschema Notation

Data types and subschemas used throughout this TIP are defined in [TIP-21](../TIP-0021/tip-0021.md).

## Global Protocol Parameters

Global protocol parameters used throughout this TIP are defined in [TIP-22 (IOTA)](../TIP-0022/tip-0022.md) and
[TIP-32 (Shimmer)](../TIP-0032/tip-0032.md).

## Transaction Payload

[TIP-45](../TIP-0045/tip-0045.md) is the basis for output validation in this TIP.

# Unlock Conditions

New output features that introduce unlocking conditions, that is, they define constraints on how the output can be
unlocked and spent, are grouped under the field <i>Unlock Conditions</i>.

Each output **must not contain more than one unlock condition of each type** and not all unlock condition types are
supported for each output type.

## State Controller Address Unlock Condition

An unlock condition defined solely for <i>Account Output</i>. It is functionally equivalent to an <i>Address Unlock
Condition</i>, however there are additional transition constraints defined for the Account UTXO state machine that can
only be carried out by the `State Controller Address`, hence the distinct unlock condition type.

<details>
  <summary>State Controller Address Unlock Condition</summary>
  <blockquote>Defines the State Controller Address that owns this output. It can unlock the output with the proper <i>Unlock</i> in a transaction that state transitions the account output.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Unlock Condition Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 4</strong> to denote a <i>State Controller Address Unlock Condition</i>.</td>
  </tr>
  <tr>
    <td valign="top">Address <code>oneOf</code></td>
    <td colspan="2">
      <details>
        <summary>Ed25519 Address</summary>
        <blockquote>An Address derived from an Ed25519 Public Key. Defined in <a href='../TIP-0038/tip-0038.md#ed25519-address'>TIP-38 (Ed25519 Address)</a>.</blockquote>
      </details>
      <details>
        <summary>Account Address</summary>
        <blockquote>An Address derived from an Account ID which can be unlocked by unlocking the corresponding Account. Defined in <a href='../TIP-0038/tip-0038.md#account-address'>TIP-38 (Account Address)</a>.</blockquote>
      </details>
      <details>
        <summary>NFT Address</summary>
        <blockquote>An Address derived from an NFT ID which can be unlocked by unlocking the corresponding NFT. Defined in <a href='../TIP-0038/tip-0038.md#nft-address'>TIP-38 (NFT Address)</a>.</blockquote>
      </details>
      <details>
        <summary>Multi Address</summary>
        <blockquote>Defines a Multi Address that consists of addresses with weights and a threshold value. The Multi Address can be unlocked if the cumulative weight of all unlocked addresses is equal to or exceeds the threshold. Defined in <a href='../TIP-0052/tip-0052.md#multi-address'>TIP-52 (Multi Address)</a>.</blockquote>
      </details>
      <details>
        <summary>Restricted Address</summary>
        <blockquote>An address that contains another address and allows for configuring its capabilities. Defined in <a href='../TIP-0050/tip-0050.md#restricted-address'>TIP-50 (Restricted Address)</a>.</blockquote>
      </details>
    </td>
  </tr>
</table>

The additional constraints are defined in [Account Output Design](#account-output) section.

## Governor Address Unlock Condition

An unlock condition defined solely for <i>Account Output</i>. It is functionally equivalent to an <i>Address Unlock
Condition</i>, however there are additional transition constraints defined for the Account UTXO state machine that can
only be carried out by the `Governor Address`, hence the distinct unlock condition type.

<details>
  <summary>Governor Address Unlock Condition</summary>
  <blockquote>Defines the Governor Address that owns this output. It can unlock the output with the proper <i>Unlock</i> in a transaction that governance transitions the account output.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Unlock Condition Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 5</strong> to denote a <i>Governor Address Unlock Condition</i>.</td>
  </tr>
  <tr>
    <td valign="top">Address <code>oneOf</code></td>
    <td colspan="2">
      <details>
        <summary>Ed25519 Address</summary>
        <blockquote>An Address derived from an Ed25519 Public Key. Defined in <a href='../TIP-0038/tip-0038.md#ed25519-address'>TIP-38 (Ed25519 Address)</a>.</blockquote>
      </details>
      <details>
        <summary>Account Address</summary>
        <blockquote>An Address derived from an Account ID which can be unlocked by unlocking the corresponding Account. Defined in <a href='../TIP-0038/tip-0038.md#account-address'>TIP-38 (Account Address)</a>.</blockquote>
      </details>
      <details>
        <summary>NFT Address</summary>
        <blockquote>An Address derived from an NFT ID which can be unlocked by unlocking the corresponding NFT. Defined in <a href='../TIP-0038/tip-0038.md#nft-address'>TIP-38 (NFT Address)</a>.</blockquote>
      </details>
      <details>
        <summary>Multi Address</summary>
        <blockquote>Defines a Multi Address that consists of addresses with weights and a threshold value. The Multi Address can be unlocked if the cumulative weight of all unlocked addresses is equal to or exceeds the threshold. Defined in <a href='../TIP-0052/tip-0052.md#multi-address'>TIP-52 (Multi Address)</a>.</blockquote>
      </details>
      <details>
        <summary>Restricted Address</summary>
        <blockquote>An address that contains another address and allows for configuring its capabilities. Defined in <a href='../TIP-0050/tip-0050.md#restricted-address'>TIP-50 (Restricted Address)</a>.</blockquote>
      </details>
    </td>
  </tr>
</table>

The additional constraints are defined in [Account Output Design](#account-output) section.

### Account Locking & Unlocking

A transaction may consume a (non-account) output that belongs to an <i>Account Address</i> by state transitioning the
account output with the matching `Account ID`. This serves the exact same purpose as providing a signature to unlock an
output locked under a private key backed address, such as <i>Ed25519 Addresses</i>.

On protocol level, account unlocking is done using a new unlock type, called **Account Unlock**.

<details>
  <summary>Account Unlock</summary>
  <blockquote>Points to the unlock of a consumed Account Output.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Unlock Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 2</strong> to denote an <i>Account Unlock</i>.</td>
  </tr>
  <tr>
    <td>Account Reference Unlock Index</td>
    <td>uint16</td>
    <td>Index of input and unlock corresponding to an Account Output.</td>
  </tr>
</table>

This unlock is similar to the <i>Reference Unlock</i>. However, it is valid if and only if the input of the transaction
at index `Account Reference Unlock Index` is an account output with the same `Account ID` as the one derived from the
`Address` field of the to-be unlocked output.

Additionally, the <i>Account Unlocks</i> must also be ordered to prevent circular dependencies:

If the i-th _Unlock_ of a transaction is an _Account Unlock_ and has `Account Reference Unlock Index` set to k, it must
hold that i > k. Hence, an <i>Account Unlock</i> can only reference an _Unlock_ (unlocking the corresponding account) at
a smaller index.

For example the scenario where `Account A` is locked to the address of `Account B` while `Account B` is in locked to the
address of `Account A` introduces a circular dependency and is not well-defined. By requiring the _Unlocks_ to be
ordered as described above, a transaction consuming `Account A` as well as `Account B` can never be valid as there would
always need to be one _Account Unlock_ referencing a greater index.

#### Account Unlock Syntactic Validation

- It must hold that 0 ≤ `Account Reference Unlock Index` < `Max Inputs Count - 1`.

#### Account Unlock Semantic Validation

- The address of the unlocking condition of the input being unlocked must be an <i>Account Address</i>.
- The index `i` of the <i>Account Unlock</i> is the index of the input in the transaction that it unlocks.
  `Account Reference Unlock Index` must be < `i`.
- `Account Reference Unlock Index` defines a previous input of the transaction and its unlock. This input must be an
  <i>Account Output</i> with `Account ID` that refers to the <i>Account Address</i> being unlocked.
- The referenced <i>Account Output</i> must be unlocked for state transition.

# Features

## Block Issuer Feature

The presence of a <i>Block Issuer Feature</i> on an account signals that this account can issue blocks - it is an
_issuer account_. This feature defines the public keys with which a signature to burn Mana from the containing account's
Block Issuance Credit can be verified. The feature is locked to the account to disincentivize malicious behavior when
issuing blocks. The feature can be unlocked with an expiration mechanism. Any mana generated or stored by an issuer
account is locked to that account.

<details>
  <summary>Block Issuer Feature</summary>
  <blockquote>Contains the public keys used to verify block signatures.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Feature Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 5</strong> to denote a <i>Block Issuer Feature</i>.</td>
  </tr>
  <tr>
    <td>Expiry Slot</td>
    <td>uint64</td>
    <td>The slot index at which the <i>Block Issuer Feature</i> expires and can be removed.</td>
  </tr>
  <tr>
    <td>Block Issuer Keys Count</td>
    <td>uint8</td>
    <td>The number of Block Issuer Keys.</td>
  </tr>
  <tr>
    <td valign="top">Block Issuer Keys <code>anyOf</code></td>
    <td colspan="2">
      <details>
        <summary>Ed25519 Public Key Block Issuer Key</summary>
        <blockquote>A Block Issuer Key backed by an Ed25519 Public Key. Defined in <a href='../TIP-0042/tip-0042.md#ed25519-public-key-block-issuer-key'>TIP-42 (Ed25519 Public Key Block Issuer Key)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Block Issuer Key Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 0</strong> to denote an <i>Ed25519 Public Key Block Issuer Key</i>.</td>
          </tr>
          <tr>
            <td>Public Key</td>
            <td>ByteArray[32]</td>
            <td>The raw bytes of the Ed25519 public key.</td>
          </tr>
        </table>
      </details>
    </td>
  </tr>
</table>

### Additional syntactic transaction validation rule

- The following conditions must all hold:
  - `Block Issuer Key Count >= 1`.
  - `Block Issuer Key Count <= 128`.
  - Each key in `Block Issuer Keys` must be unique based on the concatenation of its `Public Key Type` and `Public Key`.
    No duplicates are allowed.
  - Each key in `Block Issuer Keys` must be lexicographically ordered based on the concatenation of its
    `Public Key Type` and `Public Key`.

### Additional semantic transaction validation rule

- Let `Past Bounded Slot Index` be given by `Commitment Index + Max Committable Age` where `Commitment Index` is the
  slot index of the commitment input.
- When a _Block Issuer Feature_ is present in an account on the input or output side of a transaction, the transaction
  that contains this output is valid, if and only if:
  - A _Commitment Input_ is present.
  - A _Block Issuance Credit Input_ is present whose `Account ID` equals that of the account being state transitioned.
- When a <i>Block Issuer Feature</i> is present in an account input, the transaction is invalid if that account has
  negative Block Issuance Credit, whose value is taken from the _Block Issuance Credit Input_.
- When a <i>Block Issuer Feature</i> is present in an account output and it was not present in the account input, or the
  account output represents the initial state of its UTXO state machine, the transaction that contains the account
  output is valid, if the following condition holds:
  - `Expiry Slot >= Past Bounded Slot Index`.
- When a <i>Block Issuer Feature</i> is present in an account output, the transaction that contains this output is
  valid, only if the following condition for Mana in the transaction holds for the account containing the feature:
  `TotalManaIn - AccountIn >= TotalManaOut - AccountOut`, where:
  - `TotalManaIn` is the sum of all mana on the input side of the transaction.
  - `TotalManaOut` is the sum of all mana on the output side of the transaction.
  - `AccountIn = AccountIn_potential + AccountIn_stored`.
  - `AccountOut = AccountOut_allotted + AccountOut_stored + AccountOut_locked`.
  - `AccountIn_potential` is the decayed potential Mana generated by the `Amount` of the account input.
  - `AccountIn_stored` is the decayed stored Mana of the account input.
  - `AccountOut_allotted` is the amount of Mana allotted to the account.
  - `AccountOut_stored` is the amount of Mana stored in the account.
  - `AccountOut_locked` is the amount of Mana locked into outputs for which each output satisfies all of the following
    conditions:
    - The output has a <i>Timelock Unlock Condition</i> containing a
      `Slot Index >= Past Bounded Slot Index + Maximum Committable Age`.
    - The output has an <i>Address Unlock Condition</i> with the `Account Address` variant containing the input
      account's address.
- When a <i>Block Issuer Feature</i> is present in an account input containing `Expiry Slot >= Commitment Index` the
  transaction that contains the account output is valid, if all of the following conditions for the account output hold:
  - The account is not destroyed on the output side and retains its Block Issuer Feature.
  - If either of the following conditions hold:
    - The value of `Expiry Slot` on the account output matches the value of `Expiry Slot` on the account input.
    - `Expiry Slot >= Past Bounded Slot Index`
- When a <i>Block Issuer Feature</i> is present in an account input with `Expiry Slot < Commitment Index`, the
  transaction that contains the corresponding account output is valid, if either of the following conditions hold:
  - `Expiry Slot >= Past Bounded Slot Index`
  - The <i>Block Issuer Feature</i> is removed in the account output or the account is destroyed.

### Storage Score

A Block Issuer Feature incurs additional computational cost in order to maintain the block issuer keys of an account and
due to having to keep them in memory. Due to this, such a feature has an additional storage score offset. The offset of
the feature is the sum of offsets of each contained key:

- If the contained key is of type `Ed25519 Public Key Block Issuer Key`, the offset is
  `Storage Score Offset Ed25519 Block Issuer Key`.

`Rent Parameters` are defined in [TIP-49](../TIP-0049/tip-0049.md).

## Staking Feature

The presence of a <i>Staking Feature</i> on an account signals that this account wants to participate in the validation
of the network. Accounts with this feature are also referred to as _stakers_ or _registered validators_ and are eligible
to be selected into the validator committee. Refer to [TIP-40](../TIP-0040/tip-0040.md) for details on Committee
Selection and Staking in general.

The user-chosen amount of IOTA coins in the `Staked Amount` field of the feature is locked until `End Epoch`. The latter
can also be chosen freely, with the constraint that the locked funds must be _unbonded_ before they can be unlocked.
Since a staker has significant control over the rewards of the validator pool, formed by itself and its delegators, this
unbonding period is in place to protect delegators from stakers changing the rules without prior notice. Once a staker
goes into its unbonding period, delegators can be notified that a change is upcoming. Once an account has a Staking
Feature whose `End Epoch` is the current one or has passed, it is no longer considered for validator selection and the
Feature can be removed or updated. In the same transaction, the staker may claim their Mana Rewards for all epochs in
which they were selected to participate in the validator committee.

<details>
  <summary>Staking Feature</summary>
  <blockquote>Stakes IOTA coins to become eligible for committee selection, validate the network and receive Mana rewards.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Feature Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 6</strong> to denote a <i>Staking Feature</i>.</td>
  </tr>
  <tr>
    <td>Staked Amount</td>
    <td>uint64</td>
    <td>The amount of IOTA coins that are locked and staked in the containing account.</td>
  </tr>
  <tr>
    <td>Fixed Cost</td>
    <td>uint64</td>
    <td>The fixed cost of the validator, which it receives as part of its Mana rewards.</td>
  </tr>
  <tr>
    <td>Start Epoch</td>
    <td>uint64</td>
    <td>The epoch index in which the staking started.</td>
  </tr>
  <tr>
    <td>End Epoch</td>
    <td>uint64</td>
    <td>The epoch index in which the staking ends.</td>
  </tr>
</table>

### Additional semantic transaction validation rule

- Let `Future Bounded Epoch Index` be the epoch index corresponding to the slot index given by
  `Commitment Index + Min Committable Age` where `Commitment Index` is the slot index of the commitment input.
- Let `Past Bounded Epoch Index` be the epoch index corresponding to the slot index given by
  `Commitment Index + Max Committable Age` where `Commitment Index` is the slot index of the commitment input.
- When a _Staking Feature_ is present in an account output on the input or output side of a transaction, the transaction
  that contains this output is valid, if and only if:
  - A _Commitment Input_ is present.
- When a _Staking Feature_ is present in an account output on the output side of a transaction, the transaction that
  contains this output is valid, if and only if all of the following conditions hold:
  - A _Block Issuer Feature_ must be present in the account.
- When a _Staking Feature_ is present in an account output on the output side of a transaction and it was not present on
  the input side, the transaction that contains this output is valid, if and only if all of the following conditions
  hold:
  - The `Amount` in the containing account output satisfies `Amount >= Staked Amount`.
  - `Start Epoch` must be set to `Past Bounded Epoch Index`.
  - `End Epoch` satisfies `End Epoch >= Past Bounded Epoch Index + Staking Unbonding Period`.
- When a _Staking Feature_ is present in an account output on the input side of a transaction, the transaction that
  contains this input is valid, if and only if all of the following conditions hold:
  - If `Future Bounded Epoch Index <= End Epoch`, all of the following conditions must hold:
    - A _Staking Feature_ must be present on the corresponding account on the output side of the transaction.
    - The `Amount` in the containing account output satisfies `Amount >= Staked Amount`.
    - The fields `Staked Amount`, `Start Epoch` and `Fixed Cost` on the feature on the input and the feature on the
      output side match.
    - One of the following conditions hold:
      - `End Epoch` in the _Staking Feature_ on the output is equal to `End Epoch` in the _Staking Feature_ on the
        input.
      - `End Epoch` satisfies `End Epoch >= Past Bounded Epoch Index + Staking Unbonding Period`.
  - If `Future Bounded Epoch Index > End Epoch`, either of the following conditions must hold:
    - A _Staking Feature_ is present on the output side and the fields `Staked Amount`, `Start Epoch`, `End Epoch` and
      `Fixed Cost` on the feature on the input side and the feature on the output side match.
    - One of the following conditions must hold:
      - All of the following conditions hold:
        - The _Staking Feature_ is removed on the output side of the transaction or the account is destroyed.
        - A _Reward Input_ must be present whose `Index` references the account input.
        - The Mana amount on the input side of the transaction is increased by at most the amount defined in
          [TIP-40 (Validator Rewards)](../TIP-0040/tip-0040.md#validator-rewards).
      - All of the following conditions hold:
        - A _Staking Feature_ must be present on the corresponding account on the output side of the transaction.
        - The `Amount` in the containing account output satisfies `Amount >= Staked Amount`.
        - `Start Epoch` is set to `Past Bounded Epoch Index`.
        - `End Epoch` satisfies `End Epoch >= Past Bounded Epoch Index + Staking Unbonding Period`.
        - A _Reward Input_ must be present whose `Index` references the account input.
        - The Mana amount on the input side of the transaction is increased by at most the amount defined in
          [TIP-40 (Validator Rewards)](../TIP-0040/tip-0040.md#validator-rewards).

### Storage Score

A Staking Feature incurs additional computational cost in order to compute the total stake of a validator. Due to this,
such a feature has an additional storage score offset, the `Rent Parameters::Storage Score Offset Staking Feature` as
defined in [TIP-49](../TIP-0049/tip-0049.md).

# Account Output

The <i>Account Output</i> is a specific implementation of a UTXO state machine. `Account ID`, the unique identifier of
an instance of the deployed state machine, is generated deterministically by the protocol and is not allowed to change
in any future state transitions.

<i>Account Output</i> represents an account in the ledger with two control levels and a permanent <i>Account
Address</i>. The account owns other outputs that are locked under <i>Account Address</i>. The account keeps track of
state transitions (`State Index` counter), controlled foundries (`Foundry Counter`) and anchors the layer 2 state as
metadata into the UTXO ledger.

<details>
  <summary>Account Output</summary>
  <blockquote>Describes an account in the ledger that can be controlled by the state and governance controllers.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Output Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 1</strong> to denote an <i>Account Output</i>.</td>
  </tr>
  <tr>
    <td>Amount</td>
    <td>uint64</td>
    <td>The amount of IOTA coins held by the output.</td>
  </tr>
  <tr>
    <td>Mana</td>
    <td>uint64</td>
    <td>The amount of Stored Mana held by the output.</td>
  </tr>
  <tr>
    <td>Account ID</td>
    <td>ByteArray[32]</td>
    <td>Unique identifier of the account, which is the BLAKE2b-256 hash of the <i>Output ID</i> that created it. <i>Account Address = Account Address Type || Account ID</i>.</td>
  </tr>
  <tr>
    <td>State Index</td>
    <td>uint32</td>
    <td>A counter that must increase by 1 every time the account is state transitioned.</td>
  </tr>
  <tr>
    <td>State Metadata</td>
    <td>(uint16)ByteArray</td>
    <td>Metadata that can only be changed by the state controller. A leading uint16 denotes its length.</td>
  </tr>
  <tr>
    <td>Foundry Counter</td>
    <td>uint32</td>
    <td>A counter that denotes the number of foundries created by this account.</td>
  </tr>
  <tr>
    <td>Unlock Conditions Count</td>
    <td>uint8</td>
    <td>The number of unlock conditions following.</td>
  </tr>
  <tr>
    <td valign="top">Unlock Conditions <code>atMostOneOfEach</code></td>
    <td colspan="2">
      <details>
        <summary>State Controller Address Unlock Condition</summary>
        <blockquote>Defines the State Controller Address that owns this output. It can unlock the output with the proper <i>Unlock</i> in a transaction that state transitions the account output. Defined in <a href='../TIP-0042/tip-0042.md#state-controller-address-unlock-condition'>TIP-42 (State Controller Address Unlock Condition)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Unlock Condition Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 4</strong> to denote a <i>State Controller Address Unlock Condition</i>.</td>
          </tr>
          <tr>
            <td valign="top">Address <code>oneOf</code></td>
            <td colspan="2">
              <details>
                <summary>Ed25519 Address</summary>
                <blockquote>An Address derived from an Ed25519 Public Key. Defined in <a href='../TIP-0038/tip-0038.md#ed25519-address'>TIP-38 (Ed25519 Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Account Address</summary>
                <blockquote>An Address derived from an Account ID which can be unlocked by unlocking the corresponding Account. Defined in <a href='../TIP-0038/tip-0038.md#account-address'>TIP-38 (Account Address)</a>.</blockquote>
              </details>
              <details>
                <summary>NFT Address</summary>
                <blockquote>An Address derived from an NFT ID which can be unlocked by unlocking the corresponding NFT. Defined in <a href='../TIP-0038/tip-0038.md#nft-address'>TIP-38 (NFT Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Multi Address</summary>
                <blockquote>Defines a Multi Address that consists of addresses with weights and a threshold value. The Multi Address can be unlocked if the cumulative weight of all unlocked addresses is equal to or exceeds the threshold. Defined in <a href='../TIP-0052/tip-0052.md#multi-address'>TIP-52 (Multi Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Restricted Address</summary>
                <blockquote>An address that contains another address and allows for configuring its capabilities. Defined in <a href='../TIP-0050/tip-0050.md#restricted-address'>TIP-50 (Restricted Address)</a>.</blockquote>
              </details>
            </td>
          </tr>
        </table>
      </details>
      <details>
        <summary>Governor Address Unlock Condition</summary>
        <blockquote>Defines the Governor Address that owns this output. It can unlock the output with the proper <i>Unlock</i> in a transaction that governance transitions the account output. Defined in <a href='../TIP-0042/tip-0042.md#governor-address-unlock-condition'>TIP-42 (Governor Address Unlock Condition)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Unlock Condition Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 5</strong> to denote a <i>Governor Address Unlock Condition</i>.</td>
          </tr>
          <tr>
            <td valign="top">Address <code>oneOf</code></td>
            <td colspan="2">
              <details>
                <summary>Ed25519 Address</summary>
                <blockquote>An Address derived from an Ed25519 Public Key. Defined in <a href='../TIP-0038/tip-0038.md#ed25519-address'>TIP-38 (Ed25519 Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Account Address</summary>
                <blockquote>An Address derived from an Account ID which can be unlocked by unlocking the corresponding Account. Defined in <a href='../TIP-0038/tip-0038.md#account-address'>TIP-38 (Account Address)</a>.</blockquote>
              </details>
              <details>
                <summary>NFT Address</summary>
                <blockquote>An Address derived from an NFT ID which can be unlocked by unlocking the corresponding NFT. Defined in <a href='../TIP-0038/tip-0038.md#nft-address'>TIP-38 (NFT Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Multi Address</summary>
                <blockquote>Defines a Multi Address that consists of addresses with weights and a threshold value. The Multi Address can be unlocked if the cumulative weight of all unlocked addresses is equal to or exceeds the threshold. Defined in <a href='../TIP-0052/tip-0052.md#multi-address'>TIP-52 (Multi Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Restricted Address</summary>
                <blockquote>An address that contains another address and allows for configuring its capabilities. Defined in <a href='../TIP-0050/tip-0050.md#restricted-address'>TIP-50 (Restricted Address)</a>.</blockquote>
              </details>
            </td>
          </tr>
        </table>
      </details>
    </td>
  </tr>
  <tr>
    <td>Features Count</td>
    <td>uint8</td>
    <td>The number of features following.</td>
  </tr>
  <tr>
    <td valign="top">Features <code>atMostOneOfEach</code></td>
    <td colspan="2">
      <details>
        <summary>Sender Feature</summary>
        <blockquote>Identifies the validated sender of the output. Defined in <a href='../TIP-0038/tip-0038.md#sender-feature'>TIP-38 (Sender Feature)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Feature Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 0</strong> to denote a <i>Sender Feature</i>.</td>
          </tr>
          <tr>
            <td valign="top">Sender <code>oneOf</code></td>
            <td colspan="2">
              <details>
                <summary>Ed25519 Address</summary>
                <blockquote>An Address derived from an Ed25519 Public Key. Defined in <a href='../TIP-0038/tip-0038.md#ed25519-address'>TIP-38 (Ed25519 Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Account Address</summary>
                <blockquote>An Address derived from an Account ID which can be unlocked by unlocking the corresponding Account. Defined in <a href='../TIP-0038/tip-0038.md#account-address'>TIP-38 (Account Address)</a>.</blockquote>
              </details>
              <details>
                <summary>NFT Address</summary>
                <blockquote>An Address derived from an NFT ID which can be unlocked by unlocking the corresponding NFT. Defined in <a href='../TIP-0038/tip-0038.md#nft-address'>TIP-38 (NFT Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Multi Address</summary>
                <blockquote>Defines a Multi Address that consists of addresses with weights and a threshold value. The Multi Address can be unlocked if the cumulative weight of all unlocked addresses is equal to or exceeds the threshold. Defined in <a href='../TIP-0052/tip-0052.md#multi-address'>TIP-52 (Multi Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Restricted Address</summary>
                <blockquote>An address that contains another address and allows for configuring its capabilities. Defined in <a href='../TIP-0050/tip-0050.md#restricted-address'>TIP-50 (Restricted Address)</a>.</blockquote>
              </details>
            </td>
          </tr>
        </table>
      </details>
      <details>
        <summary>Metadata Feature</summary>
        <blockquote>Defines metadata (arbitrary binary data) that will be stored in the output. Defined in <a href='../TIP-0038/tip-0038.md#metadata-feature'>TIP-38 (Metadata Feature)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Feature Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 2</strong> to denote a <i>Metadata Feature</i>.</td>
          </tr>
          <tr>
            <td>Data</td>
            <td>(uint16)ByteArray</td>
            <td>Binary data. A leading uint16 denotes its length.</td>
          </tr>
        </table>
      </details>
      <details>
        <summary>Block Issuer Feature</summary>
        <blockquote>Contains the public keys used to verify block signatures. Defined in <a href='../TIP-0042/tip-0042.md#block-issuer-feature'>TIP-42 (Block Issuer Feature)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Feature Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 5</strong> to denote a <i>Block Issuer Feature</i>.</td>
          </tr>
          <tr>
            <td>Expiry Slot</td>
            <td>uint64</td>
            <td>The slot index at which the <i>Block Issuer Feature</i> expires and can be removed.</td>
          </tr>
          <tr>
            <td>Block Issuer Keys Count</td>
            <td>uint8</td>
            <td>The number of Block Issuer Keys.</td>
          </tr>
          <tr>
            <td valign="top">Block Issuer Keys <code>anyOf</code></td>
            <td colspan="2">
              <details>
                <summary>Ed25519 Public Key Block Issuer Key</summary>
                <blockquote>A Block Issuer Key backed by an Ed25519 Public Key. Defined in <a href='../TIP-0042/tip-0042.md#ed25519-public-key-block-issuer-key'>TIP-42 (Ed25519 Public Key Block Issuer Key)</a>.</blockquote>
                <table>
                  <tr>
                    <td>
                      <b>Name</b>
                    </td>
                    <td>
                      <b>Type</b>
                    </td>
                    <td>
                      <b>Description</b>
                    </td>
                  </tr>
                  <tr>
                    <td>Block Issuer Key Type</td>
                    <td>uint8</td>
                    <td>Set to <strong>value 0</strong> to denote an <i>Ed25519 Public Key Block Issuer Key</i>.</td>
                  </tr>
                  <tr>
                    <td>Public Key</td>
                    <td>ByteArray[32]</td>
                    <td>The raw bytes of the Ed25519 public key.</td>
                  </tr>
                </table>
              </details>
            </td>
          </tr>
        </table>
      </details>
      <details>
        <summary>Staking Feature</summary>
        <blockquote>Stakes IOTA coins to become eligible for committee selection, validate the network and receive Mana rewards. Defined in <a href='../TIP-0042/tip-0042.md#staking-feature'>TIP-42 (Staking Feature)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Feature Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 6</strong> to denote a <i>Staking Feature</i>.</td>
          </tr>
          <tr>
            <td>Staked Amount</td>
            <td>uint64</td>
            <td>The amount of IOTA coins that are locked and staked in the containing account.</td>
          </tr>
          <tr>
            <td>Fixed Cost</td>
            <td>uint64</td>
            <td>The fixed cost of the validator, which it receives as part of its Mana rewards.</td>
          </tr>
          <tr>
            <td>Start Epoch</td>
            <td>uint64</td>
            <td>The epoch index in which the staking started.</td>
          </tr>
          <tr>
            <td>End Epoch</td>
            <td>uint64</td>
            <td>The epoch index in which the staking ends.</td>
          </tr>
        </table>
      </details>
    </td>
  </tr>
  <tr>
    <td>Immutable Features Count</td>
    <td>uint8</td>
    <td>The number of immutable features following. Immutable features are defined upon deployment of the UTXO state machine and are not allowed to change in any future state transition.</td>
  </tr>
  <tr>
    <td valign="top">Immutable Features <code>atMostOneOfEach</code></td>
    <td colspan="2">
      <details>
        <summary>Issuer Feature</summary>
        <blockquote>Identifies the validated issuer of the UTXO state machine. Defined in <a href='../TIP-0038/tip-0038.md#issuer-feature'>TIP-38 (Issuer Feature)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Feature Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 1</strong> to denote a <i>Issuer Feature</i>.</td>
          </tr>
          <tr>
            <td valign="top">Issuer <code>oneOf</code></td>
            <td colspan="2">
              <details>
                <summary>Ed25519 Address</summary>
                <blockquote>An Address derived from an Ed25519 Public Key. Defined in <a href='../TIP-0038/tip-0038.md#ed25519-address'>TIP-38 (Ed25519 Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Account Address</summary>
                <blockquote>An Address derived from an Account ID which can be unlocked by unlocking the corresponding Account. Defined in <a href='../TIP-0038/tip-0038.md#account-address'>TIP-38 (Account Address)</a>.</blockquote>
              </details>
              <details>
                <summary>NFT Address</summary>
                <blockquote>An Address derived from an NFT ID which can be unlocked by unlocking the corresponding NFT. Defined in <a href='../TIP-0038/tip-0038.md#nft-address'>TIP-38 (NFT Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Multi Address</summary>
                <blockquote>Defines a Multi Address that consists of addresses with weights and a threshold value. The Multi Address can be unlocked if the cumulative weight of all unlocked addresses is equal to or exceeds the threshold. Defined in <a href='../TIP-0052/tip-0052.md#multi-address'>TIP-52 (Multi Address)</a>.</blockquote>
              </details>
              <details>
                <summary>Restricted Address</summary>
                <blockquote>An address that contains another address and allows for configuring its capabilities. Defined in <a href='../TIP-0050/tip-0050.md#restricted-address'>TIP-50 (Restricted Address)</a>.</blockquote>
              </details>
            </td>
          </tr>
        </table>
      </details>
      <details>
        <summary>Metadata Feature</summary>
        <blockquote>Defines metadata (arbitrary binary data) that will be stored in the output. Defined in <a href='../TIP-0038/tip-0038.md#metadata-feature'>TIP-38 (Metadata Feature)</a>.</blockquote>
        <table>
          <tr>
            <td>
              <b>Name</b>
            </td>
            <td>
              <b>Type</b>
            </td>
            <td>
              <b>Description</b>
            </td>
          </tr>
          <tr>
            <td>Feature Type</td>
            <td>uint8</td>
            <td>Set to <strong>value 2</strong> to denote a <i>Metadata Feature</i>.</td>
          </tr>
          <tr>
            <td>Data</td>
            <td>(uint16)ByteArray</td>
            <td>Binary data. A leading uint16 denotes its length.</td>
          </tr>
        </table>
      </details>
    </td>
  </tr>
</table>

## Additional Transaction Syntactic Validation Rules

### Output Syntactic Validation

- `Amount` field must fulfill the [storage deposit requirements](../TIP-0047/tip-0047.md) and must not be `0`.
- `Amount` field must be ≤ `Token Supply`.
- `Native Tokens Count` must not be greater than `Max Native Tokens Count`.
- `Native Tokens` must be lexicographically sorted based on `Token ID`.
- Each <i>Native Token</i> must be unique in the set of `Native Tokens` based on its `Token ID`. No duplicates are
  allowed.
- `Amount` of any <i>Native Token</i> must not be `0`.
- It must hold true that `Unlock Conditions Count` = `2`.
- `Unlock Condition Type` of an <i>Unlock Condition</i> must define one of the following types:
  - <i>State Controller Address Unlock Condition</i>
  - <i>Governor Address Unlock Condition</i>
- <i>Unlock Conditions</i> must be sorted in ascending order based on their `Unlock Condition Type`.
- Syntactic validation of all present unlock conditions must pass.
- It must hold true that `0` ≤ `Features Count` ≤ `4`.
- `Feature Type` of a <i>Feature</i> in `Features` must define one of the following types:
  - <i>Sender Feature</i>
  - <i>Metadata Feature</i>
  - <i>Block Issuer Feature</i>
  - <i>Staking Feature</i>
- It must hold true that `0` ≤ `Immutable Features Count` ≤ `2`.
- `Feature Type` of a <i>Feature</i> in `Immutable Features` must define on of the following types:
  - <i>Issuer Feature</i>
  - <i>Metadata Feature</i>
- <i>Features</i> must be sorted in ascending order based on their `Feature Type` both in `Features` and
  `Immutable Features` fields.
- Syntactic validation of all present features must pass.
- When `Account ID` is zeroed out, `State Index` and `Foundry Counter` must be `0`.
- `length(State Metadata)` must not be greater than `Max Metadata Length`.
- `Address` of <i>State Controller Address Unlock Condition</i> and `Address` of <i>Governor Address Unlock
  Condition</i> must be different from the account address derived from `Account ID`.

## Additional Transaction Semantic Validation Rules

- Explicit `Account ID`: `Account ID` is taken as the value of the `Account ID` field in the account output.
- Implicit `Account ID`: When an account output is consumed as an input in a transaction and `Account ID` field is
  zeroed out while `State Index` and `Foundry Counter` are zero, take the BLAKE2b-256 hash of the `Output ID` of the
  input as `Account ID`. Note that "implicit" here only refers to the account ID and has no relationship to the implicit
  account concept.
- For every non-zero explicit `Account ID` on the output side there must be a corresponding account on the input side.
  The corresponding account has the explicit or implicit `Account ID` equal to that of the account on the output side.

### Consumed Outputs

Whenever an account output is consumed in a transaction, it means that the account is transitioned into its next state.
The **current state** is defined as the **consumed account output**, while the **next state** is defined as the
**account output with the same explicit `AccountID` on the output side**. There are two types of transitions:
`state transition` and `governance transition`.

- State transition:
  - A state transition is identified by an incremented `State Index`.
  - The `State Index` must be incremented by 1.
  - The unlock must correspond to the `Address` of <i>State Controller Address Unlock Condition</i>.
  - State transition can only change the following fields in the next state:
    - `Amount`,
    - `Native Tokens`,
    - `State Index`,
    - `State Metadata`,
    - `Foundry Counter`,
    - `Sender Feature` in `Features` and
    - `Staking Feature` in `Features`.
  - `Foundry Counter` field must increase by the number of foundry outputs created in the transaction that map to
    `Account ID`. The `Serial Number` fields of the created foundries must be the set of natural numbers that cover the
    open-ended interval between the previous and next values of the `Foundry Counter` field in the account output.
  - The created foundry outputs must be sorted in the list of outputs by their `Serial Number`. Note, that any foundry
    that maps to `Account ID` and has a `Serial Number` that is less or equal to the `Foundry Counter` of the input
    account is ignored when it comes to sorting.
  - Newly created foundries in the transaction that map to different accounts can be interleaved when it comes to
    sorting.
- Governance transition:
  - A governance transition is identified by an unchanged `State Index` in next state. If there is no account output on
    the output side with a corresponding explicit `Account ID`, the account is being destroyed. The next state is the
    empty state.
  - The unlock must correspond to the `Address` of <i>Governor Address Unlock Condition</i>.
  - Governance transition must only change the following fields:
    - `Address` of <i>State Controller Address Unlock Condition</i>,
    - `Address` of <i>Governor Address Unlock Condition</i>,
    - `Metadata Feature`, `Sender Feature`, `Block Issuer Feature` in `Features`.
  - The `Metadata Feature` is optional, the governor can put additional info about the chain here, for example chain
    name, fee structure, supported VMs, list of access nodes, etc., anything that helps clients to fetch info (i.e.
    account balances) about the layer 2 network.
- When a consumed account output has <i>Features</i> defined in `Immutable Features` and a corresponding account output
  on the output side, `Immutable Features` is not allowed to change.

### Created Outputs

- When <i>Issuer Feature</i> is present in an output and explicit `Account ID` is zeroed out, an input with `Address`
  field that corresponds to `Issuer` must be unlocked in the transaction.

### Notes

- <i>Governor Address Unlock Condition</i> field is made mandatory for now to help formal verification. When the same
  entity is defined for state and governance controllers, the output is self governed. Later, for compression reasons,
  it is possible to make the governance controller optional and define a self-governed account as one that does not have
  the governance <i>Governor Address Unlock Condition</i> set.
- Indexers and node plugins shall map the account address of the output derived with `Account ID` to the regular
  <i>address -> output</i> mapping table, so that given an <i>Account Address</i>, its most recent unspent account
  output can be retrieved.

## Storage Deposit Calculation

The storage deposit of Block Issuer Keys is higher than for other field types. Therefore, the storage deposit
calculation of account outputs defines an additional corresponding field type.

| :warning: Preliminary values |
| ---------------------------- |

<table>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Weight</th>
        <th>Reasoning</th>
    </tr>
    <tr>
        <td><code>block_issuer_key</code></td>
        <td>A Block Issuer Key contained in a <i>Block Issuer Feature</i>.</td>
        <td>100 (preliminary value for testing)</td>
        <td>A block issuer key needs to be kept in-memory for the efficient processing of incoming blocks and cannot be
        offloaded to disc.</td>
    </tr>
    <tr>
        <td><code>staking</code></td>
        <td>Any field contained in a <i>Staking Feature</i>.</td>
        <td>100 (preliminary value for testing)</td>
        <td>Staking requires additional bookkeeping in nodes for committee selection and mana rewards tracking.</td>
    </tr>
</table>

The following table shows the Account Output including the possible fields and their specific weight.

<details>
  <summary>Account Output</summary>
  <blockquote>Describes an account in the ledger that can be controlled by the state and governance controllers.</blockquote>
</details>
<table>
  <tr>
    <td>Offset</td>
    <td>
      <table>
        <tr>
          <td>
            <b>Field</b>
          </td>
          <td>
            <b>Field type</b>
          </td>
          <td>
            <b>Length Minimum</b>
          </td>
          <td>
            <b>Length Maximum</b>
          </td>
        </tr>
        <tr>
          <td>OutputID</td>
          <td>
            <code>key</code>
          </td>
          <td>34</td>
          <td>34</td>
        </tr>
        <tr>
          <td>Block ID (included)</td>
          <td>
            <code>data</code>
          </td>
          <td>40</td>
          <td>40</td>
        </tr>
        <tr>
          <td>Slot Booked</td>
          <td>
            <code>data</code>
          </td>
          <td>8</td>
          <td>8</td>
        </tr>
        <tr>
          <td>Slot Created</td>
          <td>
            <code>data</code>
          </td>
          <td>8</td>
          <td>8</td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td>Fields</td>
    <td>
      <table>
        <tr>
          <td>
            <b>Field</b>
          </td>
          <td>
            <b>Field type</b>
          </td>
          <td>
            <b>Length Minimum</b>
          </td>
          <td>
            <b>Length Maximum</b>
          </td>
        </tr>
        <tr>
          <td>Output Type</td>
          <td>
            <code>data</code>
          </td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>Amount</td>
          <td>
            <code>data</code>
          </td>
          <td>8</td>
          <td>8</td>
        </tr>
        <tr>
          <td>Mana</td>
          <td>
            <code>data</code>
          </td>
          <td>8</td>
          <td>8</td>
        </tr>
        <tr>
          <td>Native Tokens Count</td>
          <td>
            <code>data</code>
          </td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td valign="top">Native Tokens <code>optAnyOf</code></td>
          <td colspan="2">
            <details>
              <summary>Native Token</summary>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Token ID</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>38</td>
                        <td>38</td>
                      </tr>
                      <tr>
                        <td>Amount</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>32</td>
                        <td>32</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
          </td>
        </tr>
        <tr>
          <td>Account ID</td>
          <td>
            <code>data</code>
          </td>
          <td>32</td>
          <td>32</td>
        </tr>
        <tr>
          <td>State Index</td>
          <td>
            <code>data</code>
          </td>
          <td>4</td>
          <td>4</td>
        </tr>
        <tr>
          <td>State Metadata Length</td>
          <td>
            <code>data</code>
          </td>
          <td>2</td>
          <td>2</td>
        </tr>
        <tr>
          <td>State Metadata</td>
          <td>
            <code>data</code>
          </td>
          <td>0</td>
          <td>8192</td>
        </tr>
        <tr>
          <td>Foundry Counter</td>
          <td>
            <code>data</code>
          </td>
          <td>4</td>
          <td>4</td>
        </tr>
        <tr>
          <td>Unlock Conditions Count</td>
          <td>
            <code>data</code>
          </td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td valign="top">Unlock Conditions <code>atMostOneOfEach</code></td>
          <td colspan="2">
            <details>
              <summary>State Controller Address Unlock Condition</summary>
              <blockquote>Defines the State Controller Address that owns this output. It can unlock the output with the proper <i>Unlock</i> in a transaction that state transitions the account output.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Unlock Condition Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td valign="top">Address <code>oneOf</code></td>
                        <td colspan="2">
                          <details>
                            <summary>Ed25519 Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>PubKeyHash</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Account Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Account ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>NFT Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>NFT ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Multi Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td valign="top">Addresses <code>anyOf</code></td>
                                      <td colspan="2">
                                        <details>
                                          <summary>Address with Weight</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td valign="top">Address <code>oneOf</code></td>
                                                    <td colspan="2">
                                                      <details>
                                                        <summary>Ed25519 Address</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Address Type</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                                <tr>
                                                                  <td>PubKeyHash</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>32</td>
                                                                  <td>32</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                      <details>
                                                        <summary>Account Address</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Address Type</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Account ID</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>32</td>
                                                                  <td>32</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                      <details>
                                                        <summary>NFT Address</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Address Type</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                                <tr>
                                                                  <td>NFT ID</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>32</td>
                                                                  <td>32</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Weight</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                      </td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Restricted Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td valign="top">Address <code>oneOf</code></td>
                                      <td colspan="2">
                                        <details>
                                          <summary>Ed25519 Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td>PubKeyHash</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>32</td>
                                                    <td>32</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                        <details>
                                          <summary>Account Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Account ID</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>32</td>
                                                    <td>32</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                        <details>
                                          <summary>NFT Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td>NFT ID</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>32</td>
                                                    <td>32</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                        <details>
                                          <summary>Multi Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td valign="top">Addresses <code>anyOf</code></td>
                                                    <td colspan="2">
                                                      <details>
                                                        <summary>Address with Weight</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td valign="top">Address <code>oneOf</code></td>
                                                                  <td colspan="2">
                                                                    <details>
                                                                      <summary>Ed25519 Address</summary>
                                                                      <table>
                                                                        <tr>
                                                                          <td>Fields</td>
                                                                          <td>
                                                                            <table>
                                                                              <tr>
                                                                                <td>
                                                                                  <b>Field</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Field type</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Minimum</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Maximum</b>
                                                                                </td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Address Type</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>1</td>
                                                                                <td>1</td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>PubKeyHash</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>32</td>
                                                                                <td>32</td>
                                                                              </tr>
                                                                            </table>
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </details>
                                                                    <details>
                                                                      <summary>Account Address</summary>
                                                                      <table>
                                                                        <tr>
                                                                          <td>Fields</td>
                                                                          <td>
                                                                            <table>
                                                                              <tr>
                                                                                <td>
                                                                                  <b>Field</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Field type</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Minimum</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Maximum</b>
                                                                                </td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Address Type</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>1</td>
                                                                                <td>1</td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Account ID</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>32</td>
                                                                                <td>32</td>
                                                                              </tr>
                                                                            </table>
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </details>
                                                                    <details>
                                                                      <summary>NFT Address</summary>
                                                                      <table>
                                                                        <tr>
                                                                          <td>Fields</td>
                                                                          <td>
                                                                            <table>
                                                                              <tr>
                                                                                <td>
                                                                                  <b>Field</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Field type</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Minimum</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Maximum</b>
                                                                                </td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Address Type</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>1</td>
                                                                                <td>1</td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>NFT ID</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>32</td>
                                                                                <td>32</td>
                                                                              </tr>
                                                                            </table>
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </details>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Weight</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                    </td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Allowed Capabilities Length</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Allowed Capabilities</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>0</td>
                                      <td>1</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
            <details>
              <summary>Governor Address Unlock Condition</summary>
              <blockquote>Defines the Governor Address that owns this output. It can unlock the output with the proper <i>Unlock</i> in a transaction that governance transitions the account output.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Unlock Condition Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td valign="top">Address <code>oneOf</code></td>
                        <td colspan="2">
                          <details>
                            <summary>Ed25519 Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>PubKeyHash</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Account Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Account ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>NFT Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>NFT ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Multi Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td valign="top">Addresses <code>anyOf</code></td>
                                      <td colspan="2">
                                        <details>
                                          <summary>Address with Weight</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td valign="top">Address <code>oneOf</code></td>
                                                    <td colspan="2">
                                                      <details>
                                                        <summary>Ed25519 Address</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Address Type</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                                <tr>
                                                                  <td>PubKeyHash</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>32</td>
                                                                  <td>32</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                      <details>
                                                        <summary>Account Address</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Address Type</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Account ID</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>32</td>
                                                                  <td>32</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                      <details>
                                                        <summary>NFT Address</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Address Type</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                                <tr>
                                                                  <td>NFT ID</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>32</td>
                                                                  <td>32</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Weight</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                      </td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Restricted Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td valign="top">Address <code>oneOf</code></td>
                                      <td colspan="2">
                                        <details>
                                          <summary>Ed25519 Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td>PubKeyHash</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>32</td>
                                                    <td>32</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                        <details>
                                          <summary>Account Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Account ID</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>32</td>
                                                    <td>32</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                        <details>
                                          <summary>NFT Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td>NFT ID</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>32</td>
                                                    <td>32</td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                        <details>
                                          <summary>Multi Address</summary>
                                          <table>
                                            <tr>
                                              <td>Fields</td>
                                              <td>
                                                <table>
                                                  <tr>
                                                    <td>
                                                      <b>Field</b>
                                                    </td>
                                                    <td>
                                                      <b>Field type</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Minimum</b>
                                                    </td>
                                                    <td>
                                                      <b>Length Maximum</b>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>Address Type</td>
                                                    <td>
                                                      <code>data</code>
                                                    </td>
                                                    <td>1</td>
                                                    <td>1</td>
                                                  </tr>
                                                  <tr>
                                                    <td valign="top">Addresses <code>anyOf</code></td>
                                                    <td colspan="2">
                                                      <details>
                                                        <summary>Address with Weight</summary>
                                                        <table>
                                                          <tr>
                                                            <td>Fields</td>
                                                            <td>
                                                              <table>
                                                                <tr>
                                                                  <td>
                                                                    <b>Field</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Field type</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Minimum</b>
                                                                  </td>
                                                                  <td>
                                                                    <b>Length Maximum</b>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td valign="top">Address <code>oneOf</code></td>
                                                                  <td colspan="2">
                                                                    <details>
                                                                      <summary>Ed25519 Address</summary>
                                                                      <table>
                                                                        <tr>
                                                                          <td>Fields</td>
                                                                          <td>
                                                                            <table>
                                                                              <tr>
                                                                                <td>
                                                                                  <b>Field</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Field type</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Minimum</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Maximum</b>
                                                                                </td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Address Type</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>1</td>
                                                                                <td>1</td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>PubKeyHash</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>32</td>
                                                                                <td>32</td>
                                                                              </tr>
                                                                            </table>
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </details>
                                                                    <details>
                                                                      <summary>Account Address</summary>
                                                                      <table>
                                                                        <tr>
                                                                          <td>Fields</td>
                                                                          <td>
                                                                            <table>
                                                                              <tr>
                                                                                <td>
                                                                                  <b>Field</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Field type</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Minimum</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Maximum</b>
                                                                                </td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Address Type</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>1</td>
                                                                                <td>1</td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Account ID</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>32</td>
                                                                                <td>32</td>
                                                                              </tr>
                                                                            </table>
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </details>
                                                                    <details>
                                                                      <summary>NFT Address</summary>
                                                                      <table>
                                                                        <tr>
                                                                          <td>Fields</td>
                                                                          <td>
                                                                            <table>
                                                                              <tr>
                                                                                <td>
                                                                                  <b>Field</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Field type</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Minimum</b>
                                                                                </td>
                                                                                <td>
                                                                                  <b>Length Maximum</b>
                                                                                </td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>Address Type</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>1</td>
                                                                                <td>1</td>
                                                                              </tr>
                                                                              <tr>
                                                                                <td>NFT ID</td>
                                                                                <td>
                                                                                  <code>data</code>
                                                                                </td>
                                                                                <td>32</td>
                                                                                <td>32</td>
                                                                              </tr>
                                                                            </table>
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </details>
                                                                  </td>
                                                                </tr>
                                                                <tr>
                                                                  <td>Weight</td>
                                                                  <td>
                                                                    <code>data</code>
                                                                  </td>
                                                                  <td>1</td>
                                                                  <td>1</td>
                                                                </tr>
                                                              </table>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </details>
                                                    </td>
                                                  </tr>
                                                </table>
                                              </td>
                                            </tr>
                                          </table>
                                        </details>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Allowed Capabilities Length</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Allowed Capabilities</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>0</td>
                                      <td>1</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
          </td>
        </tr>
        <tr>
          <td>Features Count</td>
          <td>
            <code>data</code>
          </td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td valign="top">Features <code>atMostOneOfEach</code></td>
          <td colspan="2">
            <details>
              <summary>Sender Feature</summary>
              <blockquote>Identifies the validated sender of the output.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Feature Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td valign="top">Sender <code>oneOf</code></td>
                        <td colspan="2">
                          <details>
                            <summary>Ed25519 Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>PubKeyHash</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Account Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Account ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>NFT Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>NFT ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
            <details>
              <summary>Metadata Feature</summary>
              <blockquote>Defines metadata (arbitrary binary data) that will be stored in the output.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Feature Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>Data Length</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>2</td>
                        <td>2</td>
                      </tr>
                      <tr>
                        <td>Data</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>8192</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
            <details>
              <summary>Block Issuer Feature</summary>
              <blockquote>Contains the public keys used to verify block signatures.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Feature Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>Expiry Slot</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>8</td>
                        <td>8</td>
                      </tr>
                      <tr>
                        <td>Block Issuer Keys Count</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td valign="top">Block Issuer Keys <code>anyOf</code></td>
                        <td colspan="2">
                          <details>
                            <summary>Ed25519 Public Key Block Issuer Key</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Block Issuer Key Type</td>
                                      <td>
                                        <code>block_issuer_key</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Public Key</td>
                                      <td>
                                        <code>block_issuer_key</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
            <details>
              <summary>Staking Feature</summary>
              <blockquote>Stakes IOTA coins to become eligible for committee selection, validate the network and receive Mana rewards.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Feature Type</td>
                        <td>
                          <code>staking</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>Staked Amount</td>
                        <td>
                          <code>staking</code>
                        </td>
                        <td>8</td>
                        <td>8</td>
                      </tr>
                      <tr>
                        <td>Fixed Cost</td>
                        <td>
                          <code>staking</code>
                        </td>
                        <td>8</td>
                        <td>8</td>
                      </tr>
                      <tr>
                        <td>Start Epoch</td>
                        <td>
                          <code>staking</code>
                        </td>
                        <td>8</td>
                        <td>8</td>
                      </tr>
                      <tr>
                        <td>End Epoch</td>
                        <td>
                          <code>staking</code>
                        </td>
                        <td>8</td>
                        <td>8</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
          </td>
        </tr>
        <tr>
          <td>Immutable Features Count</td>
          <td>
            <code>data</code>
          </td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td valign="top">Immutable Features <code>atMostOneOfEach</code></td>
          <td colspan="2">
            <details>
              <summary>Issuer Feature</summary>
              <blockquote>Identifies the validated issuer of the UTXO state machine.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Feature Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td valign="top">Issuer <code>oneOf</code></td>
                        <td colspan="2">
                          <details>
                            <summary>Ed25519 Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>PubKeyHash</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>Account Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>Account ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                          <details>
                            <summary>NFT Address</summary>
                            <table>
                              <tr>
                                <td>Fields</td>
                                <td>
                                  <table>
                                    <tr>
                                      <td>
                                        <b>Field</b>
                                      </td>
                                      <td>
                                        <b>Field type</b>
                                      </td>
                                      <td>
                                        <b>Length Minimum</b>
                                      </td>
                                      <td>
                                        <b>Length Maximum</b>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>Address Type</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>1</td>
                                      <td>1</td>
                                    </tr>
                                    <tr>
                                      <td>NFT ID</td>
                                      <td>
                                        <code>data</code>
                                      </td>
                                      <td>32</td>
                                      <td>32</td>
                                    </tr>
                                  </table>
                                </td>
                              </tr>
                            </table>
                          </details>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
            <details>
              <summary>Metadata Feature</summary>
              <blockquote>Defines metadata (arbitrary binary data) that will be stored in the output.</blockquote>
              <table>
                <tr>
                  <td>Fields</td>
                  <td>
                    <table>
                      <tr>
                        <td>
                          <b>Field</b>
                        </td>
                        <td>
                          <b>Field type</b>
                        </td>
                        <td>
                          <b>Length Minimum</b>
                        </td>
                        <td>
                          <b>Length Maximum</b>
                        </td>
                      </tr>
                      <tr>
                        <td>Feature Type</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>1</td>
                      </tr>
                      <tr>
                        <td>Data Length</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>2</td>
                        <td>2</td>
                      </tr>
                      <tr>
                        <td>Data</td>
                        <td>
                          <code>data</code>
                        </td>
                        <td>1</td>
                        <td>8192</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </details>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td>v_byte Minimum</td>
    <td>527</td>
  </tr>
  <tr>
    <td>v_byte Maximum</td>
    <td>455989</td>
  </tr>
</table>

## Implicit Account

Accounts face a bootstrapping problem since users need to own an Account with a _Block Issuer Feature_ in order to issue
blocks, but cannot create it themselves, since they cannot issue blocks yet. While users are always reliant on
third-parties onboarding users into the network, an implicit account simplifies this onboarding. An _Implicit Account_
is defined as a Basic Output owned by a special address type, the _Implicit Account Creation Address_. The implicit
accounts only purpose and functionality is to be converted to a regular account.

Firstly, most third-parties sending funds to users use the simplest possible way to do so, that is, Basic Outputs, be it
exchanges or users creation a simple value transaction in a wallet. Secondly, even if third parties are willing to
create regular accounts for users, they would additionally have to request block issuer keys from the user, which they
would add to a Block Issuer Feature in the newly created Account, in order for the new owner to be able to issue blocks
with it.

Implicit Accounts address both of these issues. Third-parties can easily create implicit accounts for a user, without
even being aware of it, if that user simply hands them an _Implicit Account Creation Address_ instead of another address
type. An implicit account has an implicitly defined Block Issuer Key, corresponding to the address itself. Thus implicit
accounts can issue blocks by signing them with the private key corresponding to the public key from which the _Implicit
Account Creation Address_ was derived.

Thus, since implicit accounts are much easier to create than a regular account, and are sufficient to create a full
account from, without having to rely on a third party, the barrier to entry for the network is lowered.

The _Implicit Account Creation Address_ is defined as follows:

<table>
    <tr>
        <td><b>Name</b></td>
        <td><b>Type</b></td>
        <td><b>Description</b></td>
    </tr>
    <tr>
        <td>Address Type</td>
        <td>uint8</td>
        <td>
            Set to <strong>value 24</strong> to denote an <i>Implicit Account Creation Address</i>.
        </td>
    </tr>
    <tr>
        <td>PubKeyHash</td>
        <td>ByteArray[32]</td>
        <td>The raw bytes of the Implicit Account Creation Address which is the BLAKE2b-256 hash of the Ed25519 public key.</td>
    </tr>
</table>

An _Implicit Account Creation Address_ is structurally the same as an _Ed25519 Address_, except for the _Address Type_,
and thus also backed by an Ed25519 key pair.

### Storage Score

- An _Implicit Account Creation Address_ defines a dedicated Storage Score Offset:
  `Storage Score Offset Implicit Account Creation Address`. It is designed to match the Storage Score required for a
  minimal Account Output that contains a Block Issuer Feature when contained in a Basic Output. This offset is derived
  from protocol parameters and other computed outputs:
  - Let `Storage Score Offset Implicit Account Creation Address` be `Account Output Score - Basic Output Score`, where:
    - `Account Output Score` is the storage score of an Account Output which fulfills the following conditions:
      - `Native Tokens Count == 0`.
      - `State Metadata` must be empty.
      - `State Controller Address Unlock Condition` and `Governor Address Unlock Condition` must contain an _Ed25519
        Address_.
      - `Features Count == 1`.
      - A _Block Issuer Feature_ must be present with `Block Issuer Keys Count == 1` and a block issuer key of type
        _Block Issuer Key Ed25519_.
      - `Immutable Features Count == 0`.
    - `Basic Output Score` is the storage score of a Basic Output which fulfills the following conditions:
      - `Native Tokens Count == 0`.
      - `Unlock Conditions Count == 1`.
      - The unlock condition is of type `Address Unlock Condition` and contains an `Ed25519 Address`.
      - `Features Count == 0`.

### Creation Semantic Transaction Validation Rules

To create an implicit account, a Basic Output is created on the output side of a transaction and the `Address` in the
`Address Unlock Condition` is set to an address of type _Implicit Account Creation Address_.

- If an output in a transaction contains an unlock condition with an _Implicit Account Creation Address_, that output is
  referred to as an `Implicit Account`, and the transaction is valid only if all of the following conditions hold:
  - The `Implicit Account` is of type `Basic Output`.
  - The `Implicit Account`'s `Unlock Conditions Count == 1`.
  - The unlock condition on the `Implicit Account` is of type `Address Unlock Condition`.
  - The `Implicit Account`'s `Native Tokens Count == 0`.
  - The `Implicit Account`'s `Features Count == 0`.

### Conversion Semantic Transaction Validation Rules

To convert an implicit account to an account, a block can be issued using the implicit account as the block issuer,
containing a transaction that consumes the implicit account on the input side and creates an account output on the
output side. Since an implicit account can issue blocks, some of the requirements of a block issuer account apply to
implicit accounts as well, as defined below. The conversion of an implicit account is a combination of regular account
creation and block issuer feature transition.

- The account ID of an `Implicit Account` is referred to as `Implicit Account ID` and is the BLAKE2b-256 hash of the
  Output ID of the Basic Output that represents the `Implicit Account`.
- If a transaction contains an input with an unlock condition containing an implicit account address, the transaction is
  only valid if all of the following conditions hold:
  - A valid `Account` Output is created on the output side, for which all of the following conditions hold:
    - The account must be a valid account creation, except that the `Account ID` of the `Account` must be set to the
      `Implicit Account ID` instead of being zeroed out.
    - The `Account` must have a Block Issuer Feature and it must pass semantic validation as if the implicit account
      contained a Block Issuer Feature with its `Expiry Slot` set to the maximum value of slot indices and the feature
      was transitioned.
  - No other Implicit Account Creation Address is present on the input side of the transaction.

### Implicit Account Block Issuance

An implicit account can issue blocks by using the public key from which the implicit account creation address was
derived as a block issuer key. A separate block issuer key type is reserved for that, which is however never used in
transactions directly.

<details>
  <summary>Ed25519 Public Key Hash Block Issuer Key</summary>
  <blockquote>A block issuer key for issuing blocks from implicit accounts.</blockquote>
</details>
<table>
  <tr>
    <td>
      <b>Name</b>
    </td>
    <td>
      <b>Type</b>
    </td>
    <td>
      <b>Description</b>
    </td>
  </tr>
  <tr>
    <td>Block Issuer Key Type</td>
    <td>uint8</td>
    <td>Set to <strong>value 1</strong> to denote an <i>Ed25519 Public Key Hash Block Issuer Key</i>.</td>
  </tr>
  <tr>
    <td>PubKeyHash</td>
    <td>ByteArray[32]</td>
    <td>The raw bytes of the Implicit Account Creation Address which is the BLAKE2b-256 hash of the Ed25519 public key.</td>
  </tr>
</table>

# Migration

## Alias to Account Conversion

_Alias Outputs_ in Stardust-based networks are converted to _Account Outputs_. Account Outputs' BIC balance is set to
`0`.

## Block Issuer Accounts

Since IOTA 2.0 requires Accounts with a Block Issuer Feature to issue blocks and Stardust-based networks do not have
these, a migration procedure is required so the network can be bootstrapped. Users can add a serialized Block Issuer
Feature to an _Alias Output_ which is converted to an _Account Output_ with a Block Issuer Feature and the Metadata
Feature is removed from the output. This transition is only done if all of the following conditions hold:

- The _Alias Output_'s `Amount` is at least `Rent Parameters::Storage Cost * Account Output Score`, with the latter
  defined in [Implicit Account (Storage Deposit)](#storage-deposit), except that the `Block Issuer Keys Count` of the
  output for the deposit calculation must be set to the value of the `Block Issuer Keys Count` read from the serialized
  Block Issuer Feature in the to-be-converted _Alias Output_.
- The serialized Block Issuer Feature is prefixed with the ascii-encoded string `BlockIssuerFeature`, which is
  `[0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x49, 0x73, 0x73, 0x75, 0x65, 0x72, 0x46, 0x65, 0x61, 0x74, 0x75, 0x72, 0x65]` in hex
  encoding, expressed as a list in JSON.
- The Block Issuer Feature must pass syntactic validation.

If not all conditions hold, the converted Account Output will contain the Metadata Feature untouched.

Note: It is recommended to set the `Expiry Slot` to the maximum value of a `uint32`.

# Rationale & Alternatives

## Implicit Accounts

The rationale for having implicit accounts is that first-time users in a network usually receive funds in Basic Outputs
rather than Account Outputs. This leaves them unable to issue blocks since an Account with a Block Issuer Feature is
required to do so. Implicit Accounts give those users a permissionless way to create their account with the only
requirement being owned funds in an output.

Implicit Account Creation Address is a separate type of address rather than a
[capability](../TIP-0050/tip-0050.md#capability-flags) because it implies many of the capability flags but also has
additional non-trivial transaction validation rules that don't fit together with the other boolean flags that are only
concerned about one aspect of transaction validity. It would also have implications for address validity. For instance,
it would be invalid for an NFT Address to have the flag for implicit account creation set. Other capability flags do not
have implications for address validity. Moreover, the implicit account creation address can only be used in a very
limited context, i.e. within an Address Unlock Condition in a Basic Output. These reasons warrant a separate address
type.

TODO: Describe utility of max `uint32` values for `Expiry Slot` and `End Epoch`.

# Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
