---
tip: 39
title: Mana for IOTA 2.0
description: Define Mana, Mana dynamics, and other Mana-related concepts in the IOTA 2.0 protocol
author: TODO
discussions-to: TODO
status: Draft
type: Standards
layer: Core
created: 2023-05-03
requires: TIP-42
---

# Table of Contents

1. [Summary](#summary)
2. [Motivation](#motivation)
3. [Building Blocks](#building-blocks)
4. [Copyright](#copyright)

# Summary
This document defines the mana related concepts and the mana dynamics in the IOTA protocol.
The TIP defines the two types of Mana, namely **Potential Mana** and **Stored Mana** as well as the **Block Issuance Credits (BIC)** that Mana can be allotted to.

# Motivation
Mana is a resource used to determine the allowed throughput of a user and as a payment form for the block issuance in the mana burn mechanism.
Mana can be obtained by actions helpful and profitable for the network, like token holding or engagement in securing the network. Additionally, it is necessary to use the network, so it plays the core role in th Iota tokenomics. Following document gives an high level overview of mana types and dynamics. Mana is a key point of all changes introduced in the IOTA 2.0 protocol, such as staking, delegation and congestion control changes. This document works with the Congestion Control Algorithm with Mana Credits (IOTA 2.0 version of the Congestion Control mechanism), in which a certain amount of BIC is burned from an account, each time user sends a block. Also in order to allot and use fully all the mana functionalities user is required to have an account, which is introduced in [TIP-42](../TIP-0042/tip-0042.md).

# Building Blocks

## Mana design
Mana is a core element of the IOTA inactivation scheme. It is a resource that can be obtained through:
 * generating by holding IOTA tokens
 * as a reward for staking IOTA tokens
 * as a reward for delegating IOTA tokens
 * or simply received from other IOTA users.

It is an essential element of the IOTA protocol, as it is used to:
 * determine the allowed throughput of an account
 * as a payment form for the block issuance

The following solutions are designed around the newest Iota Congestion Control Algorithm (ICCA) with Mana Credits.
Additionally, Mana implementation is strictly connected to the accounts introduced in [TIP-42](../TIP-0042/tip-0042.md) and is the core point of the IOTA incentivation scheme.

**Mana** can have different forms,  each of which is described in the following sections.

* Mana's main form is the [**Stored Mana**](#stored-mana). It is the UTXO-base form of the mana that can be moved within certain rules between the different owners, what allows for mana market development.
* The [**Potential Mana**](#potential-mana) is the second form of mana, which is generated by holding IOTA tokens. It represents the newly generated mana amounts from the IOTA holdings and is implicitly connected to the UTXO that holds the IOTA tokens.
* When user spends the IOTA tokens, he is obliged to transition the potential mana to its more explicit form, mentioned before stored mana and storing the resource directly in the UTXO ledger, or user can convert mana to [**Block Issuance Credits (BIC)**](#block-issuance-credit-bic).

We refer to the mana holdings as to the sum of all the potential mana and stored mana that the user owns. 

## Mana burn
According to the ICCA with Mana Credits mechanism, during each block issuance the user needs to burn a certain amount of Block Issuance Credits dictated by the RMC.
Therefore, to use the mana as a payment for the access to the network user needs to firstly allot the mana to its account's, thus convert it during the transaction to BIC.

### RMC

## Mana decay
Mana decay is introduced as a control mechanism of the mana dynamics, altogether with the rate for the mana generation both from IOTA tokens and the staking mechanism, which will be discussed in detail in the next sections.
To guarantee non-gameability (any certain behavior, e.g., splitting accounts, cannot be profitable for the user) and the fairness of mana, the decay factor needs to be applied to all forms of mana:

- Newly generated Mana ([Potential mana section](#Potential-Mana))
- Mana stored in UTXOs ([Stored Mana section](#Stored-Mana))
- Mana bound to accounts for block issuance ([Block Issuance Credit section](#Block-Issuance-Credit-BIC))
- Mana rewarded for staking and delegation ([Mana rewards section](#Mana-rewards))

As the form in which the decay factor will be applied might differ between the mana types, it is essential to point out that all of them are based on the same exponential decay, with the same parameter $\beta$. The Incentives Whitepaper provides the specific formula for the decay function in Appendix A.

Applying decay for the generation of new mana and staking rewards is straightforward since it is done at the time of storing this Mana. Similarly, applying the decay on the already stored mana happens during the UTXO spending. In any of those cases, the node must calculate the decay based on timestamps, not local times. For block issuance credit, which lives in an account, we advise applying the decay function in a slot-based manner and updating it at the end of each slot.


### Potential Mana
**Potential mana** is a raw form of mana that is generated over time from the IOTA tokens. Every IOTA token, whether storage deposit or not generates potential mana from the output `i` according to this formula, which already includes the decay:

```math
\frac{\text{IOTA}_i}{\beta}*\Big(1 - e^{-\beta(t - t_i)}\Big),
```
where $\text{IOTA}_i$ is the amount of IOTA tokens held in output `i`, $\beta$ is the global decay parameter for all kinds of Mana, $t$ is the timestamp of the transaction (consuming output `i`) being validated, and $t_i$ is the timestamp of when output `i` was created.

The view on the potential mana value can be deterministically derived from the UTXO ledger, based on the UTXO IOTA token value and the time it was created stored in the UTXO metadata (creation time is the timestamp of the transaction).

When the UTXO is spent the potential mana is lost, therefore user needs to specify what should happen to the accumulated potential mana value. There are three options:
 - transition to Stored Mana:
  the amount of potential mana transitioned to the stored mana form needs to be placed in the newly created output on the output side of the transaction
 - transition to BIC:
 the amount of potential mana that should be allotted to the account in form of a Block Issuance Credits should be specified in the `AccountAllottment` field of the transaction.
 - ignored:
 generated mana can be ignored, so that it will be destroyed during the transaction

### Stored Mana

**Stored Mana** is contained in outputs, just like IOTA tokens. Specifically, the `Mana Amount` field of an output represents the amount of stored Mana at the output's creation time, without decay being applied, until the time when the output is consumed. Therefore, the creation time of each output with stored Mana is required to calculate the decay of stored Mana.

The stored Mana decay is applied whenever the output containing that stored Mana is consumed. The amount of stored Mana must be decayed before stored Mana is transferred into a new output according to the following formula:

```math
\text{Mana Amount}_i(t) * e^{-\beta(t - t_i)},
```

where $\text{Mana Amount}_i(t)$ is the amount of stored Mana held in output `i` at time $t$, $\beta$ is the global decay parameter, $t$ is the time of when the transaction consumes output `i`, and $t_i$ is the time of when output `i` was created.

Each output that contains stored Mana must also contain IOTA tokens due to storage deposit requirements.The following output types are able to hold stored Mana using the `Mana Amount` field: Basic Output, NFT Output, and Account Output. Note that Foundry Output is not able to hold stored Mana. Stored Mana is soulbound to an account. To transfer stored or potential Mana freely from one account to another, Mana sales outputs will be introduced. It is possible to transfer stored Mana without transferring IOTA tokens or the potential Mana generated from those tokens.

## Data Types & Subschema Notation

Data types and subschemas used throughout this TIP are defined in [TIP-21](../TIP-0021/tip-0021.md).

## Global Protocol Parameters

Global protocol parameters used throughout this TIP are defined in [TIP-22 (IOTA)](../TIP-0022/tip-0022.md) and [TIP-32 (Shimmer)](../TIP-0032/tip-0032.md).

## Transaction Payload

[TIP-20](../TIP-0020/tip-0020.md) is the basis for output validation in this TIP.

# Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
