---
tip: 49
title: IOTA 2.0 Protocol Parameters
description: Define protocol parameters for IOTA 2.0 protocol
author: TODO
discussions-to: TODO
status: Draft
type: Standards
layer: Core
created: 2023-08-28
---

# Motivation
The protocol parameters contain parameters that a node needs to apply to the components in order to communicate with other nodes and to process blocks properly. 


## Structure

### Serialized layout

<table>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Type</td>
    <td>uint8</td>
    <td>
      Set to <b>value 0</b> to denote a IOTA 2.0 protocol parameter.
    </td>
  </tr>
  <tr>
    <td>Version</td>
    <td>uint8</td>
    <td>
      The version of protocol parameters.
    </td>
  </tr>
    <td>Network Name</td>
    <td>(uint8)ByteArray</td>
    <td>
      The name of the network the node is running on.
    </td>
  </tr>
  <tr>
    <td>Bech32HRP</td>
    <td>(uint8)ByteArray</td>
    <td>
      Bech32HRP defines the HRP prefix used for Bech32 addresses in the network.
    </td>
  </tr>
  <tr>
    <td valign="top">Rent Structure <code>oneOf</code></td>
    <td colspan="2">
      <details open="true">
        <blockquote>
          Rent Structure defines the rent structure used by a given node/network.
        </blockquote>
        <table>
            <tr>
                <td>VByte Cost</td>
                <td>uint32</td>
                <td>
                VByte Cost defines the rent of a single virtual byte denoted in IOTA tokens.
                </td>
            </tr>
            <tr>
                <td>VByte Factor Data</td>
                <td>uint8</td>
                <td>
                VByte Factor Data defines the factor to be used for data only fields.
                </td>
            </tr>
            <tr>
                <td>VByte Factor Key</td>
                <td>uint8</td>
                <td>
                VByte Factor Key defines the factor to be used for key/lookup generating fields.
                </td>
            </tr>
            <tr>
                <td>VByte Factor Block Issuer Key</td>
                <td>uint8</td>
                <td>
                VByte Factor Block Issuer Key defines the factor to be used for block issuer feature public keys.
                </td>
            </tr>
            <tr>
                <td>VByte Factor Staking Feature</td>
                <td>uint8</td>
                <td>
                VByte Factor Staking Feature defines the factor to be used for staking feature.
                </td>
            </tr>
            <tr>
                <td>VByte Factor Delegation</td>
                <td>uint8</td>
                <td>
                VByte Factor Delegation defines the factor to be used for delegation output.
                </td>
            </tr>
        </table>
    </td>
  </tr>
  <tr>
    <td valign="top">Work Score Structure <code>oneOf</code></td>
    <td colspan="2">
      <details open="true">
        <blockquote>
          Work Score Structure defines the work score structure used by a given node/network.
        </blockquote>
        <table>
            <tr>
                <td>Work Score Data Kilobyte</td>
                <td>uint32</td>
                <td>
                Accounts for the network traffic per kilobyte.
                </td>
            </tr>
            <tr>
                <td>Work Score Block</td>
                <td>uint32</td>
                <td>
                Accounts for work done to process a block in the node software.
                </td>
            </tr>
            <tr>
                <td>Work Score Missing Parent</td>
                <td>uint32</td>
                <td>
                The work score factor to apply when not enough strong parents are present as determined by <code>Work Score Min Strong Parents Threshold</code>.
                </td>
            </tr>
            <tr>
                <td>Work Score Input</td>
                <td>uint32</td>
                <td>
                Accounts for loading the UTXO from the database and performing the mana balance check.
                </td>
            </tr>
            <tr>
                <td>Work Score Context Input</td>
                <td>uint32</td>
                <td>
                Accounts for loading and checking the context input.
                </td>
            </tr>
            <tr>
                <td>Work Score Output</td>
                <td>uint32</td>
                <td>
                Accounts for storing the UTXO in the database.
                </td>
            </tr>
            <tr>
                <td>Work Score Native Token</td>
                <td>uint32</td>
                <td>
                Accounts for native token balance checks which use big integers.
                </td>
            </tr>
            <tr>
                <td>Work Score Staking</td>
                <td>uint32</td>
                <td>
                Accounts for the cost of updating the staking vector when a staking feature is present.
                </td>
            </tr>
            <tr>
                <td>Work Score Block Issuer</td>
                <td>uint32</td>
                <td>
                Accounts for the cost of updating the block issuer keys when a block issuer feature is present.
                </td>
            </tr>
            <tr>
                <td>Work Score Allotment</td>
                <td>uint32</td>
                <td>
                Accounts for accessing the account based ledger to transform the allotted mana to block issuance credits.
                </td>
            </tr>
            <tr>
                <td>Work Score Signature Ed25519</td>
                <td>uint32</td>
                <td>
                Accounts for an Ed25519 signature check.
                </td>
            </tr>
            <tr>
                <td>Work Score Min Strong Parents Threshold</td>
                <td>uint8</td>
                <td>
                The minimum number of strong parents needed in a basic block. If not reached, the block's work score increases.
                </td>
            </tr>
        </table>
    </td>
  </tr>
  <tr>
    <td>Token Supply</td>
    <td>uint64</td>
    <td>
      Token Supply defines the current token supply on the network.
    </td>
  </tr>
  <tr>
    <td>Genesis Unix Timestamp</td>
    <td>uint64</td>
    <td>
      Genesis Unix Timestamp defines the genesis timestamp at which the slots start to count.
    </td>
  </tr>
  <tr>
    <td>Slot Duration In Seconds</td>
    <td>uint8</td>
    <td>
      Slot Duration In Seconds defines the duration of each slot in seconds.
    </td>
  </tr>
  <tr>
    <td>Slots Per Epoch Exponent</td>
    <td>uint8</td>
    <td>
      Slots Per Epoch Exponent is the number of slots in an epoch expressed as an exponent of 2. (2**SlotsPerEpochExponent) == slots in an epoch.
    </td>
  </tr>
   <tr>
    <td valign="top">Mana Structure <code>oneOf</code></td>
    <td colspan="2">
      <details open="true">
        <blockquote>
          Mana Structure defines the parameters used by mana calculation.
        </blockquote>
        <table>
          <tr>
            <td>Mana Bits Count</td>
            <td>uint8</td>
            <td>
              Mana Bits Count is the number of bits used to represent Mana.
            </td>
          </tr>
          <tr>
            <td>Mana Generation Rate</td>
            <td>uint8</td>
            <td>
              Mana Generation Rate is the amount of potential Mana generated by 1 IOTA in 1 slot.
            </td>
          </tr>
          <tr>
            <td>Mana Generation Rate Exponent</td>
            <td>uint8</td>
            <td>
              Mana Generation Rate Exponent is the scaling of Mana Generation Rate expressed as an exponent of 2.
            </td>
          </tr>
          <tr>
            <td>Mana Decay Factors Length</td>
            <td>uint16</td>
            <td>
              The length of Mana Decay Factors.
            </td>
          </tr>
          <tr>
            <td>Mana Decay Factors</td>
            <td>uint32Array</td>
            <td>
              Mana Decay Factors is a lookup table of epoch index diff to mana decay factor (slice index 0 = 1 epoch).
            </td>
          </tr>
          <tr>
            <td>Mana Decay Factors Exponent</td>
            <td>uint8</td>
            <td>
              Mana Decay Factors Exponent is the scaling of ManaDecayFactors expressed as an exponent of 2.
            </td>
          </tr>
          <tr>
            <td>Mana Decay Factor Epochs Sum</td>
            <td>uint32</td>
            <td>
              Mana Decay Factor Epochs Sum is an integer approximation of the sum of decay over epochs.
            </td>
          </tr>
          <tr>
            <td>Mana Decay Factor Epochs Sum Exponent</td>
            <td>uint8</td>
            <td>
              Mana Decay Factor Epochs Sum Exponent is the scaling of Mana Decay Factor Epochs Sum expressed as an exponent of 2.
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </tr>
  <tr>
    <td>Staking Unbonding Period</td>
    <td>uint64</td>
    <td>
      Staking Unbonding Period defines the unbonding period in epochs before an account can stop staking.
    </td>
  </tr>
  <tr>
    <td>Validation Blocks Per Slot</td>
    <td>uint16</td>
    <td>
      Validation Blocks Per Slot is the number of validation blocks that each validator should issue each slot.
    </td>
  </tr>
  <tr>
    <td>Punishment Epochs</td>
    <td>uint64</td>
    <td>
      The number of epochs worth of Mana that a node is punished with for each additional validation block it issues.
    </td>
  </tr>
  <tr>
    <td>Liveness Threshold</td>
    <td>uint64</td>
    <td>
      Liveness Threshold is used by tip-selection to determine if a block is eligible by evaluating issuingTimes and commitments in its past-cone to Accepted Tangle Time and lastCommittedSlot respectively.
    </td>
  </tr>
  <tr>
    <td>Min Committable Age</td>
    <td>uint64</td>
    <td>
      Min Committable Age is the minimum age relative to the accepted tangle time slot index that a slot can be committed.
    </td>
  </tr>
  <tr>
    <td>Max Committable Age</td>
    <td>uint64</td>
    <td>
      Max Committable Age is the maximum age for a slot commitment to be included in a block relative to the slot index of the block issuing time.
    </td>
  </tr>
  <tr>
    <td>Epoch Nearing Threshold</td>
    <td>uint64</td>
    <td>
      Epoch Nearing Threshold is used by the epoch orchestrator to detect the slot that should trigger a new committee selection for the next and upcoming epoch.
    </td>
  </tr>
  <tr>
    <td valign="top">Congestion Control Parameters <code>oneOf</code></td>
    <td colspan="2">
      <details open="true">
        <blockquote>
          Congestion Control Parameters defines the parameters used by to calculate the Reference Mana Cost (RMC).
        </blockquote>
        <table>
            <tr>
                <td>RMC Min</td>
                <td>uint64</td>
                <td>
                RMC Min is the minimum value of the reference Mana cost.
                </td>
            </tr>
            <tr>
                <td>Increase</td>
                <td>uint64</td>
                <td>
                Increase is the increase step size of the reference Mana cost.
                </td>
            </tr>
            <tr>
                <td>Decrease</td>
                <td>uint64</td>
                <td>
                Decrease is the decrease step size of the reference Mana cost.
                </td>
            </tr>
            <tr>
                <td>Increase Threshold</td>
                <td>uint32</td>
                <td>
                Increase Threshold is the threshold for increasing the reference Mana cost.
                </td>
            </tr>
            <tr>
                <td>Decrease Threshold</td>
                <td>uint32</td>
                <td>
                Decrease Threshold is the threshold for decreasing the reference Mana cost.
                </td>
            </tr>
            <tr>
                <td>Scheduler Rate</td>
                <td>uint32</td>
                <td>
                Scheduler Rate is the rate at which the scheduler runs in workscore units per second.
                </td>
            </tr>
            <tr>
                <td>Min Mana</td>
                <td>uint64</td>
                <td>
                Min Mana is the minimum amount of Mana that an account must have to have a block scheduled.
                </td>
            </tr>
            <tr>
                <td>Max Buffer Size</td>
                <td>uint32</td>
                <td>
                Max Buffer Size is the maximum size of the buffer in scheduler.
                </td>
            </tr>
            <tr>
                <td>Max Validation Buffer Size</td>
                <td>uint32</td>
                <td>
                The maximum number of blocks in the validation buffer.
                </td>
            </tr>
        </table>
    </td>
   </tr>
   <tr>
    <td valign="top">Version Signaling <code>oneOf</code></td>
    <td colspan="2">
      <details open="true">
        <blockquote>
          Version Signaling defines the parameters used by signaling protocol parameters upgrade.
        </blockquote>
        <table>
            <tr>
                <td>Window Size</td>
                <td>uint8</td>
                <td>
                The size of the window in epochs to find which version of protocol parameters was most signaled, from currentEpoch - windowSize to currentEpoch.
                </td>
            </tr>
            <tr>
                <td>Window Target Ratio</td>
                <td>uint8</td>
                <td>
                The target number of supporters for a version to win in a windowSize.
                </td>
            </tr>
            <tr>
                <td>Activation Offset</td>
                <td>uint8</td>
                <td>
                The offset in epochs to activate the new version of protocol parameters.
                </td>
            </tr>
        </table>
    </td>
  </tr>
</table>

## Protocol Parameter Hash

The Protocol Parameter Hash is used in signaling protocol parameter upgrades and is a field in the Validation Block.

The Protocol Parameter Hash is computed as follows:
  *  Let `Protocol Parameter Bytes` be the serialized protocol parameter.
  *  Let the resulting hash be the BLAKE2b-256 hash over `Protocol Parameter Bytes`.

### Protocol parameter example

The example is a protocol parameter filled with random values:

```
{
  "type":0,
  "version":3,
  "networkName":"xxxNetwork",
  "bech32Hrp":"xxx",
  "rentStructure": {
    "vByteCost":6,
    "vByteFactorData":7,
    "vByteFactorKey":8,
    "vByteFactorBlockIssuerKey":9,
    "vByteFactorStakingFeature":10,
    "vByteFactorDelegation":10
  },
  "workScoreStructure":{
    "workScoreDataKilobyte":1,
    "workScoreBlock":2,
    "workScoreMissingParent":3,
    "workScoreInput":4,
    "workScoreContextInput":5,
    "workScoreOutput":6,
    "workScoreNativeToken":7,
    "workScoreStaking":8,
    "workScoreBlockIssuer":9,
    "workScoreAllotment":10,
    "workScoreSignatureEd25519":11,
    "workScoreMinStrongParentsThreshold":12
  },
  "tokenSupply":"1234567890987654321",
  "genesisUnixTimestamp":"1681373293",
  "slotDurationInSeconds":10,
  "slotsPerEpochExponent":13,
  "manaStructure": {
    "manaBitsCount":1,
    "manaGenerationRate":1,
    "manaGenerationRateExponent":27,
    "manaDecayFactors":[10,20],
    "manaDecayFactorsExponent":32,
    "manaDecayFactorEpochsSum":1337,
    "manaDecayFactorEpochsSumExponent":20
  },
  "stakingUnbondingPeriod":"11",
  "validationBlocksPerSlot":10,
  "punishmentEpochs":"9",
  "livenessThreshold":"3",
  "minCommittableAge":"10",
  "maxCommittableAge":"20",
  "epochNearingThreshold":"24",
  "congestionControlParameters": {
    "rmcMin":"500",
    "increase":"500",
    "decrease":"500",
    "increaseThreshold":800000,
    "decreaseThreshold":500000,
    "schedulerRate":100000,
    "minMana":"1",
    "maxBufferSize":1000,
    "maxValidationBufferSize":100
  },
  "versionSignaling": {
    "windowSize":3,
    "windowTargetRatio":4,
    "activationOffset":1
  }
}
```

Serialized bytes:
```
[0 3 10 120 120 120 78 101 116 119 111 114 107 3 120 120 120 6 0 0 0 7 8 9 10 10 1 0 0 0 2 0 0 0 3 0 0 0 4 0 0 0 5 0 0 0 6 0 0 0 7 0 0 0 8 0 0 0 9 0 0 0 10 0 0 0 11 0 0 0 12 177 28 108 177 244 16 34 17 109 184 55 100 0 0 0 0 10 13 1 1 27 2 0 10 0 0 0 20 0 0 0 32 57 5 0 0 20 11 0 0 0 0 0 0 0 10 0 9 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 10 0 0 0 0 0 0 0 20 0 0 0 0 0 0 0 24 0 0 0 0 0 0 0 244 1 0 0 0 0 0 0 244 1 0 0 0 0 0 0 244 1 0 0 0 0 0 0 0 53 12 0 32 161 7 0 160 134 1 0 1 0 0 0 0 0 0 0 232 3 0 0 100 0 0 0 3 4 1]
```

The hash of the above protocol parameter example: `0x9d3e39699e38db1d6e6777a40f82b1b5030e645cffb08dba3a157105bd6bfac8`.

# Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
